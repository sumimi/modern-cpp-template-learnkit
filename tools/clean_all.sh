#!/bin/bash
set -e

###############################################################################
# clean_all.sh - プロジェクト全体をクリーンするスクリプト
#
# - プロジェクトルート配下でのみ実行されることを前提とし、
#   `build/` ディレクトリの中身をすべて削除する。
# - `build/` 自体は削除しないため、CMakeが現在地を見失うことはなく、
#   `getcwd` エラーも発生しない。
# - `docs/` ディレクトリも同時に削除される（Doxygen出力先）。
#
# 実行場所: プロジェクトルート
#
# 実行手順:
#   bash tools/clean_all.sh
#
# 実行手順(CMakeから自動実行する場合):
#   cmake --build build --target clean_all
###############################################################################

# スクリプト自身の場所からプロジェクトルートへ移動
cd "$(dirname "$0")/.."

echo "🧹 プロジェクト全体を完全にクリーンします..."

# build/ 配下のすべての通常ファイル・フォルダを削除（ビルド成果物）
rm -rf build/*

# build/ 配下の隠しファイル・フォルダも削除（.ninja_* や .cmakeなど）
rm -rf build/.* 2>/dev/null || true

# ドキュメント生成ディレクトリを削除（Doxygen出力）
rm -rf docs/html

# ログディレクトリを削除（開発時のログ出力ディレクトリ）
rm -rf logs

echo "✅ クリーン完了：build/ と docs/ の内容を削除しました"
